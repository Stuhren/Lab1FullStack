<form action="../api/albums" method="POST" id="album-form">
    <input placeholder="Title" type="text" id="title" name="title">
    <input placeholder="Artist" type="text" id="artist" name="artist">
    <input placeholder="Year" type="number" id="year" name="year">
    <input type="submit" value="Submit">
    <p id="success-message" style="display: none;">You have added a new album to the database!</p>
    <p id="error-message" style="display: none;">Album already exists in the database!</p>
  </form>
  
  <script>
    const form = document.querySelector('#album-form');
const successMessage = document.querySelector('#success-message');
const errorMessage = document.querySelector('#error-message');

form.addEventListener('submit', async (e) => {
  e.preventDefault();
  const title = document.querySelector('#title').value;
  const artist = document.querySelector('#artist').value;
  const year = document.querySelector('#year').value;

  const requestData = {
    title: title,
    artist: artist,
    year: year,
  };

  const response = await fetch('/api/albums', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/x-www-form-urlencoded',
    },
    body: `title=${title}&artist=${artist}&year=${year}`,
  });

  const responseData = await response.json();
  console.log(responseData);

  if (responseData.message === 'Album received') {
    successMessage.style.display = 'block';
    errorMessage.style.display = 'none';
  } else if (responseData.message === 'Album already exists in the database') {
    successMessage.style.display = 'none';
    errorMessage.style.display = 'block';
  } else {
    // handle other error cases here
  }
});
  </script>